/*! trade */
define(["jquery","Keeper","base64","signin","deal_statistics"],function(a,b,c){!function(a,b){a.fn.extend({tab:function(b){function c(b){g.eq(b).addClass(d.cls).siblings().removeClass(d.cls),h.eq(b).addClass(d.cls).siblings().removeClass(d.cls),"function"===a.type(d.callback)&&d.callback.call(e,b)}var d=a.extend({nav:".tab-nav",pane:".tab-content .tab-pane",delegater:"a",cls:"active",evt:"mouseenter",callback:null},b),e=this,f=e.find(d.nav),g=f.find(d.delegater),h=e.find(d.pane),i=f.find("."+d.cls),j=0;return this.length?(i.length&&(j=i.index()),c(j),f.delegate(d.delegater,d.evt,function(b){b.preventDefault();var d=a(this);j=d.index(),c(j)}),"click"==d.evt||f.delegate(d.delegater,"click",function(a){a.preventDefault()}),this):this},affix:function(c){if(!this.length)return this;var d=a.extend({top:0,oldTop:"",bottom:0,scrollTop:null,maxTop:null,oHeight:null},c),e=this,f=e.get(0).offsetParent||document.body,f="html"==f.tagName.toLowerCase()?document.body:f,g=a(f),h=g.length?g.height():a("body").height(),i=d.oHeight||e.height(),j=d.maxTop?d.maxTop-i:0,k=document.body.scrollTop||document.documentElement.scrollTop,l=e.offset().top;if(e.is(":visible")&&(d.scrollTop||k>=l-d.top-d.bottom)&&(d.maxTop&&k>=j-d.bottom?j>l&&e.addClass("affix-bottom").css({top:j}):d.scrollTop?k>=d.scrollTop&&e.addClass("affix"):e.addClass("affix")),"undefined"==typeof document.body.style.maxHeight){var m=tuan800ued.getModule("ie6Fixed"),n=a(b).height();m&&m.fixed(e,(n-i)/2)}else a(b).bind("scroll",function(){if(e.is(":visible")){var b=document.body.scrollTop||document.documentElement.scrollTop;if(g.height()!=h){var c=g.height()-h;h=g.height(),j+=c}d.scrollTop||b>=l-d.top?d.maxTop&&b>=j-d.bottom?j>l&&(e.hasClass("affix-bottom")?1*e.css("top").match(/\d+/)!=j&&e.css("top",j):e.removeClass("affix").addClass("affix-bottom").css({top:j})):d.scrollTop?b>=d.scrollTop?e.hasClass("affix")||e.addClass("affix").removeClass("affix-bottom").css({top:""}):e.hasClass("affix")&&e.removeClass("affix"):e.hasClass("affix")||e.addClass("affix").removeClass("affix-bottom").css({top:""}):d.scrollTop<d.oldTop?(e.removeClass("affix").removeClass("affix-bottom").css({top:d.oldTop}),a("#junav2").css("display","none")):(e.removeClass("affix").removeClass("affix-bottom").css({top:""}),a("#junav2").css("display","none"))}});return this}})}(jQuery,this),b("sideNav",{init:function(){var b=a("div.side_nav");b.addClass("hao123");var c=a("#head_nav"),d=c.length?c.offset().top+c.height():0,e=a("#junav1");$dacu=a(".dacuTopBanner"),d+=e.length?e.height():0,$dacu.length&&b.css("top",d);var f=70;-1!==window.location.href.indexOf("/products/")&&(f=0),b.affix({top:f,oldTop:$dacu.length?d:"",maxTop:a(".about").length?a(".about").offset().top-20:null,oHeight:b.height()+70}),a(window).on("dacu_foot",function(){b.affix({top:f,oldTop:$dacu.length?d:"",maxTop:a(".about").length?a(".about").offset().top-20:null,oHeight:b.height()+a(".dacu_foot").height()})}),b.find(".add_link").hover(function(){a(this).addClass("add_link_hover").find(".qr_code").show()},function(){a(this).removeClass("add_link_hover").find(".qr_code").hide()}),a(".move_padding .add_link a").click(function(){_gaq.push(["_trackPageview","/PageAction/left_menu/online_kefu"])})}}),b("sidechoose_identify",{chooseIdentify:function(){var c=b.cookie("user_version");switch(c){case"man":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;男");break;case"woman":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;女");break;case"lama":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;辣妈");break;default:a("#choose_identify span").html("您的身份&nbsp;:&nbsp;请选择")}a("#choose_identify span").unbind().on("click",function(c){c.preventDefault();var d=new b.Buffers,e=b.cookie("user_version");d.append('<div class="identify_window_p">'),d.append("<p>您的身份是？</p>"),d.append("<p>只为你私人定制更合适的商品</p>"),d.append("</div>"),d.append('<div class="identify_head identify_choose">'),d.append("<ul>"),"woman"==e?d.append('<li data-version="woman" class="i_h_one on">'):d.append('<li data-version="woman" class="i_h_one">'),d.append('<a href="javascript:void(0)"><span>女</span></a>'),d.append("</li>"),"lama"==e?d.append('<li data-version="lama" class="i_h_two on">'):d.append('<li data-version="lama" class="i_h_two">'),d.append('<a href="javascript:void(0)"><span>辣妈</span></a>'),d.append("</li>"),"man"==e?d.append('<li data-version="man" class="i_h_three on">'):d.append('<li data-version="man" class="i_h_three">'),d.append('<a href="javascript:void(0)"><span>男</span></a>'),d.append("</li>"),d.append("</div>"),d.append("<div>"),d.append('<a class="identify_window_confirm" href="javascript:void(0)"><span class="i_h_sure">确定</span></a>'),d.append('<a class="identify_window_reset" data-version="def" href="javascript:void(0)"><span class="i_h_return">恢复默认</span></a>'),d.append("</div>"),a.Dialogs({id:"identify_window",overlay:!0,cls:"identify_window",auto:!1,msg:d.toString(),closebtn:".close",openfun:function(){a(".identify_window .identify_window_confirm").unbind().on("click",function(c){c.preventDefault();var d=a(".identify_choose li.on");switch(d.attr("data-version")){case"man":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;男"),b.cookie("user_version","man",{path:"/",expires:365,domain:".zhe800.com"});break;case"woman":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;女"),b.cookie("user_version","woman",{path:"/",expires:365,domain:".zhe800.com"});break;case"lama":a("#choose_identify span").html("您的身份&nbsp;:&nbsp;辣妈"),b.cookie("user_version","lama",{path:"/",expires:365,domain:".zhe800.com"});break;default:a("#choose_identify span").html("您的身份&nbsp;:&nbsp;请选择"),b.cookie("user_version","def",{path:"/",expires:365,domain:".zhe800.com"})}a(".identify_window .close").trigger("click")}),a(".identify_window .identify_window_reset").unbind().on("click",function(c){c.preventDefault(),a("#choose_identify span").html("您的身份&nbsp;:&nbsp;请选择"),b.cookie("user_version","def",{path:"/",expires:365,domain:".zhe800.com"}),a(".identify_window .close").trigger("click")}),a(".identify_window .identify_choose li").unbind().on("click",function(b){b.preventDefault(),a(this).hasClass("on")||(a(".identify_window li").removeClass("on"),a(this).addClass("on"))}),b("deal_statistics").click_stat2([{el:a(".identify_window .identify_choose li.i_h_one"),clickkey:"user_identity_woman"},{el:a(".identify_window .identify_choose li.i_h_two"),clickkey:"user_identity_hotmom"},{el:a(".identify_window .identify_choose li.i_h_three"),clickkey:"user_identity_man"},{el:a(".identify_window .identify_window_confirm"),clickkey:"user_identity_ensure"},{el:a(".identify_window .identify_window_reset"),clickkey:"user_identity_restore"},{el:a(".identify_window .close"),clickkey:"user_identity_close"}])}})}),b("deal_statistics").click_stat2([{el:a("#choose_identify span"),clickkey:"user_identity_choose"}])}}),b("secNavFix",{Init:function(){var b=a("#junav2"),c=a(".dacuTopBanner").height()+a("#toolbar").height()+a("header").height()+a("#head_nav").height();a(window).scroll(function(){b.removeAttr("style"),a(this).scrollTop()>=c?(b.addClass("junav1_fix"),a("#junav2").css("display","block")):(b.removeClass("junav1_fix"),a("#junav2").css("display","none"))})}})});