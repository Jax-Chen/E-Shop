/*! trade */
define(["jquery","Keeper"],function(a,b){function c(b){var c=a.trim(b).substring(0,25).indexOf("http://out.zhe800.com")>-1;return c}function d(a){if(a){var b=a.url.indexOf("?")>-1?a.url:a.url+"?",c=a.url.indexOf("jump")>-1,d=b+"&pos_type="+a.pos_type+"&pos_value="+a.pos_value+"&x="+a.x+"&y="+a.y+"&n="+a.n+"&sourcetype="+a.sourcetype+(c?"&zid="+a.zid:"");"_blank"==a.target?window.open(d):window.location=d}}b("outjump",{shopIndex:function(){a("body").on("click","a",function(){if(c(this.href)){var b=a(this),e=b.parents(".deal");return d({pos_type:"shop",pos_value:a("#req_tag_id").val()||"shop",x:e.attr("x-y").split("-")[0],y:e.attr("x-y").split("-")[1],n:e.index()+1,sourcetype:"zhe",target:b.attr("target"),url:this.href,zid:e.data("zid")}),!1}})},init:function(){a("body").on("click","a",function(){if(c(this.href)){var b=a(this);return $parent=b.parents('[data-behavior="show-stat"]'),d({pos_type:$parent.data("stat-pos-type"),pos_value:$parent.data("stat-pos-value"),x:$parent.data("stat-x"),y:$parent.data("stat-y"),n:$parent.data("stat-n"),sourcetype:$parent.data("stat-sourcetype"),target:b.attr("target"),url:this.href,zid:$parent.data("zid")}),!1}})}})});