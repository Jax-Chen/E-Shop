/*! trade */
define(["jquery","Keeper","base64"],function(a,b,c){b("dacu",{init:function(){var c=this;a.ajax({url:"http://www.zhe800.com/ajax_api/get_dacu_ad_config_new.jsonp",type:"get",cache:!0,dataType:"jsonp",jsonpCallback:"success",success:function(d){var e;e=b.cookie("ju_version")&&1!=b.cookie("ju_version")&&3!=b.cookie("ju_version")?d.old_user:d.new_user,e.banner_config&&a(".dacuTopBanner_hbs_banner").length>0&&c.topbanner_hover(),e.slogan_access_config&&e.slogan_access_config.img_url&&c.showGifSlogen(e.slogan_access_config),e.tab_access_config&&e.tab_access_config.img_url&&c.showGifTab(e.tab_access_config),e.right_access_config&&e.right_access_config.img_url&&c.showGifAccess(e.right_access_config),e.footbanner_config&&c.footBanner(e.footbanner_config)}})},topbanner_hover:function(){var b=a(".dacuTopBanner_hbs_banner"),c=b.attr("data-blururl"),d=b.attr("data-hoverurl"),e=b.attr("data-url");if(e){var f=new Image;f.src=e,f.onload=function(){b.css("background","url("+e+") no-repeat center center")}}d&&b.hover(function(){b.css("background","url("+d+") no-repeat center center")},function(){b.css("background","url("+(e||c)+") no-repeat center center")})},showGifSlogen:function(c){if(c.valid){var d=new b.Buffers;c.target=c.target||"_blank",c.link_url=c.link_url?c.link_url:"javascript:void(0);",d.push('<a target="'+c.target+'" href="'+c.link_url+'" class="dacu">'),d.push('<img src="'+c.img_url+'"/>'),d.push("</a>");var e=d.toString();a("header .area .l").append(e),a("#recharge .logo").append(e),c.hover_img_url&&a("header .area .l .dacu,#recharge .logo .dacu").hover(function(){a(this).find("img").attr("src",c.hover_img_url)},function(){a(this).find("img").attr("src",c.img_url)})}},showGifTab:function(c){if(c.valid){var d=new b.Buffers;c.target=c.target||"_blank",c.link_url=c.link_url?c.link_url:"javascript:void(0);",c.height=c.height||"35px",c.width=c.width||"88px",c.style="width:"+c.width+";height:"+c.height+";",d.push('<a target="'+c.target+'" href="'+c.link_url+'" class="dacu_tab">'),d.push(' <img src="'+c.img_url+'" style="'+c.style+'"/>'),d.push("</a>"),a("#head_nav .head_nav .l .n").before(d.toString()),c.hover_img_url&&a("#head_nav .head_nav .l .dacu_tab").hover(function(){a(this).find("img").attr("src",c.hover_img_url)},function(){a(this).find("img").attr("src",c.img_url)})}},showGifAccess:function(c){if(c.valid){var d=window.location.href;if(c.deal_detail_valid&&/^http:\/\/shop.zhe800.com\/products\/ze(.+)/.test(d));else if(c.order_detail_valid&&/^http:\/\/shop.zhe800.com\/my\/orders\/(.+)/.test(d)||c.order_detail_valid&&/^http:\/\/shop.zhe800.com\/my\/orders/.test(d))a("body").append("<style>.dacu_side-tab{display:block!important;}</style>");else{d=d.replace(/\/page\/\d+(\/|)/,"");var e=/\/$/.test(d)?d.replace(/\/$/,""):d+"/";if(0==d.indexOf("http://shop.zhe800.com")&&c.urls.indexOf(d)>-1&&c.urls.indexOf(e)>-1);else if(0==d.indexOf("http://shop.zhe800.com/ju_tag/")&&c.urls.indexOf(d)>-1&&c.urls.indexOf(e)>-1);else if(-1==c.urls.indexOf(d)&&-1==c.urls.indexOf(e))return}var f=new b.Buffers;c.target=c.target||"_blank",c.link_url=c.link_url?c.link_url:"javascript:void(0);",c.height=c.height||"135px",c.width=c.width||"99px",c.bg="background-image: url("+c.img_url+");width:"+c.width+"; height:"+c.height+";",c.hover_height=c.hover_height||"185px",c.hover_width=c.hover_width||"138px",c.hover_bg="background-image: url("+c.hover_img_url+");width:"+c.hover_width+"; height:"+c.hover_height+";",f.push('<div class="dacu_side-tab">'),f.push('<a class="tab-default" style="'+c.bg+'" href="'+c.link_url+'" target="'+c.target+'"></a>'),c.hover_img_url&&f.push('<a class="tab-hover" style="'+c.hover_bg+'" href="'+c.link_url+'" target="'+c.target+'"></a>'),f.push("</div>"),a("body").append(f.toString()),c.hover_img_url&&a(".dacu_side-tab").on({mouseenter:function(){a(".dacu_side-tab .tab-default").hide(0),a(".dacu_side-tab .tab-hover").show(0),a(".dacu_side-tab .tab-hover").stop(!0,!1).animate({left:"-"+c.hover_width},500)},mouseleave:function(){a(".dacu_side-tab .tab-hover").stop(!0,!1).animate({left:"-"+c.width},500,function(){a(".dacu_side-tab .tab-hover").hide(0),a(".dacu_side-tab .tab-default").show(0)})}}),a(window).bind("scroll",function(){var b=0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;b+a(window).height()/2+160>a(".about").offset().top+a(".dacu_side-tab a").height()?a(".dacu_side-tab").addClass("none"):a(".dacu_side-tab").removeClass("none")})}},footBanner:function(c){a.each(c,function(c,d){if(d.valid){d.target=d.target||"_blank",d.link_url=d.link_url?d.link_url:"javascript:void(0);",d.index_height=d.index_height||"150px",d.width=d.width||"1920px",d.bg="background:#fff url("+d.img_url+") no-repeat center center;height:"+d.index_height+";display:block;";var e=new b.Buffers;e.push('<div class="dacu_foot" style="width:100%;margin-top:-3px;border-bottom:3px solid #e02f2f;">'),e.push('    <a style="'+d.bg+'" href="'+d.link_url+'" target="'+d.target+'" data-hover_img_url='+d.hover_img_url+" data-img_url="+d.img_url+" data-height="+d.index_height+"></a>"),e.push("</div>");var f=window.location.href;d.deal_detail_valid&&/^http:\/\/shop.zhe800.com\/products\/ze(.+)/.test(f)?a(".about").prepend(e.toString()):d.order_detail_valid&&/^http:\/\/shop.zhe800.com\/my\/orders\/(.+)/.test(f)&&f.indexOf("comment")<0||d.order_list_valid&&/^http:\/\/shop.zhe800.com\/my\/orders/.test(f)&&f.indexOf("comment")<0?a(".about").prepend(e.toString()):a.each(d.urls,function(b,c){var d=/\/$/.test(f)?f.replace(/\/$/,""):f,g=["http://shop.zhe800.com","http://shop.zhe800.com/page/1","http://shop.zhe800.com/?sort=newest","http://shop.zhe800.com/?sort=hottest","http://shop.zhe800.com/page/1?sort=newest","http://shop.zhe800.com/page/1?sort=hottest"],h=!1;a.each(g,function(a,b){b==d&&(h=!0)}),h&&"http://shop.zhe800.com"==c?(a(".about").prepend(e.toString()),a(window).trigger("dacu_foot")):0==f.indexOf("http://shop.zhe800.com/ju_tag/")&&c.indexOf("http://shop.zhe800.com/ju_tag/")>-1&&(c==d||c+"/page/1"==f)&&a(".about").prepend(e.toString())})}}),a(".dacu_foot a").attr("data-hover_img_url")&&a(".dacu_foot a").hover(function(){a(this).attr("style","background:#fff url("+a(".dacu_foot a").attr("data-hover_img_url")+") no-repeat center center;height:"+a(".dacu_foot a").attr("data-height")+";display:block;")},function(){a(this).attr("style","background:#fff url("+a(".dacu_foot a").attr("data-img_url")+") no-repeat center center;height:"+a(".dacu_foot a").attr("data-height")+";display:block;")})}})});