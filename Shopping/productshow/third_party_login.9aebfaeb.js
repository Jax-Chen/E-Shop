/*! trade */
define(["jquery","Keeper"],function(a,b){var c,d;return c=function(b,d){var e;return e=this,this.$elem=a(b),this.options=a.extend(c.DEFAULT,d||{}),this.overtime_status="ready",this.overtime_timer=null,this.tplogin_win=null,this.$elem.on("click",'[data-behavior="third-party-login"]',function(b){var c,d,f,g,h,i,j,k;return b.preventDefault(),h=a(this).attr("href"),null!=h&&""!==h&&(c=a(window),i=800,d=450,k=c.width(),j=c.height(),g=Math.floor((j-d)/2),f=Math.floor((k-i)/2),e.tplogin_win=window.open(h,"tplogin_win","width="+i+", height="+d+", left="+f+", top="+g+", alwaysRaised=yes, resizable=yes"),e.tplogin_win.focus()),clearTimeout(e.overtime_timer),e.overtime_status="ready",e.detect()})},c.DEFAULT={complete:function(){}},c.prototype.detect=function(){var c;return c=this,clearTimeout(this.timer),"overtime"===this.overtime_status?void(this.overtime_status="ready"):("ready"===this.overtime_status&&(this.overtime_status="running",this.overtime_timer=setTimeout(function(){return c.overtime_status="overtime"},3e5)),b.cookie("ppinf")?a.isFunction(this.options.complete)?this.options.complete():void 0:this.timer=setTimeout(function(){return c.detect()},1e3))},d=a.fn.tplogin,a.fn.tplogin=function(b){return this.each(function(){var d,e,f;return d=a(this),e=d.data("tplogin"),f=a.extend({},"object"==typeof b&&b),null==e&&d.data("tplogin",e=new c(this,f)),"string"==typeof b?e[b]():void 0})},a.fn.tplogin.Constructor=c,a.fn.tplogin.noConflict=function(){return a.fn.tplogin=d,this},c});