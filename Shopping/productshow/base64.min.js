define([],function(){return{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_utf8_encode:function(b){var a="",e,d;b=b.replace(/\r\n/g,"\n");for(d=0;d<b.length;d++){e=b.charCodeAt(d);if(e<128){a+=String.fromCharCode(e)}else{if((e>127)&&(e<2048)){a+=String.fromCharCode((e>>6)|192);a+=String.fromCharCode((e&63)|128)}else{a+=String.fromCharCode((e>>12)|224);a+=String.fromCharCode(((e>>6)&63)|128);a+=String.fromCharCode((e&63)|128)}}}return a},_utf8_decode:function(a){var b="",e=0,g=0,f=0,d=0;while(e<a.length){g=a.charCodeAt(e);if(g<128){b+=String.fromCharCode(g);e++}else{if((g>191)&&(g<224)){f=a.charCodeAt(e+1);b+=String.fromCharCode(((g&31)<<6)|(f&63));e+=2}else{f=a.charCodeAt(e+1);d=a.charCodeAt(e+2);b+=String.fromCharCode(((g&15)<<12)|((f&63)<<6)|(d&63));e+=3}}}return b},_hexEncode:function(b){var a="",c;for(c=0;c<b.length;c++){a+=b.charCodeAt(c).toString(16)}return a},_hexDecode:function(b){var a="",c;if(b.length%2>0){b="0"+b}for(c=0;c<b.length;c=c+2){a+=String.fromCharCode(parseInt(b.charAt(c)+b.charAt(c+1),16))}return a},encode:function(c){var a="",k,h,f,j,g,e,d,b=0;c=this._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a+=this._keyStr.charAt(j);a+=this._keyStr.charAt(g);a+=this._keyStr.charAt(e);a+=this._keyStr.charAt(d)}return a},decode:function(c){var a="",k,h,f,j,g,e,d,b=0;if(c!=undefined){c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a+=String.fromCharCode(k);if(e!==64){a+=String.fromCharCode(h)}if(d!==64){a+=String.fromCharCode(f)}}}return this._utf8_decode(a)},decodeToHex:function(a){return this._hexEncode(this.decode(a))},encodeFromHex:function(a){return this.encode(this._hexDecode(a))}}});