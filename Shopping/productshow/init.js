!function(a,b,c){function d(b){function c(){-1!=k.className.indexOf("on")?k.className=k.className.replace(/\s?on/,""):k.className+=" on"}var d,e=b.text,f=b.width,h=(b.height,t(b,{width:"",height:"",text:"",jid:"",host:"",statetxt:"",clickkey:""})),i=b?"?"+l(h):"",j=w+"#login"+i,k=u.createElement("a"),m=!1;if(k.id="imBtn","true"===b.message){var n;switch(k.href=j,k.target="_blank",k.className="message",k.innerHTML="<i></i><em>消息</em>",b.type){case"buyer":n="ppinf"}var o=function(a){if(!x(n)){var e=u.getElementById("imBtn");return e.className=e.className.replace(/\s?login/,"").replace(/^\s+|\s+$/g,""),setTimeout(o,1e3)}g(a,function(e){e.data>0?(k.className="message login on",k.innerHTML="<i></i><em>消息</em><span>("+(e.data>99?"99+":e.data)+")</span>",m||(m=!0,d=setInterval(c,1e3))):(k.className=k.className.replace(/\s?on/,""),m&&(clearInterval(d),m=!1)),setTimeout(function(){o(a)},b.interval||3e4)})},p=function(c){x("ppinf")?a.post("/im-server-web/im/getuserbycookies",function(b){var d=a.parseJSON(b),e=d&&d.user_jid;e&&(c.className+=" login",o(e))}):setTimeout(function(){p(c)},b.interval||3e4)};p(k)}else{var q=u.createElement("div");q.innerHTML='<a class="btn '+(b.type||"")+'" href="'+j+'" target="_blank"><i></i><span>'+decodeURIComponent(e||"")+"</span></a>",k=q.children[0],f&&(k.style.width=f+"px")}return k}function e(b,c){a.post("/com.tuan800.im.userCenter/im/user/batchPresenceStatus",{userjids:"array"===a.type(b)?b.join(","):b},function(a){var b="string"==typeof a?new Function("return "+a)():a;"function"==typeof c&&c(b.data)})}function f(b,c,d){a.post("/com.tuan800.im.userCenter/im/user/groupOnlineStatus",{idType:b,busUid:decodeURIComponent(c)},function(a){var b="string"==typeof a?new Function("return "+a)():a;"function"==typeof d&&d(b.data)})}function g(b,c){var d={userjid:b};a.get("/com.tuan800.im.userCenter/im/chatMessage/offlineMessageCount",d,function(a){var b="string"==typeof a?new Function("return "+a)():a;"function"==typeof c&&c(b)})}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function i(a,b,c,d){if(a&&!d&&"string"==typeof c){c=decodeURIComponent(c);var e=c.split(":"),f="";1==e.length?f=e[0]:2==e.length&&(f=0==b?e[1]:e[0]),a.children[1]&&(a.children[1].innerHTML=f)}}function j(a){var b=a||location.href,c=b.match(/\#([^?]+)/)||[];return c[1]||""}function k(a){for(var b,c=a||location.search||j(),d=/([^?#&]+)\=([^?#&]+)/g,e={};null!=(b=d.exec(c));)e[b[1]]=b[2];return e}function l(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&""!==a[c]&&b.push(c+"="+a[c]);return b.join("&")}function m(a){var b,c,d,e;for(b="",d=a.length,c=0;d>c;c++)e=a.charCodeAt(c),e>=1&&127>=e?b+=a.charAt(c):e>2047?(b+=String.fromCharCode(224|e>>12&15),b+=String.fromCharCode(128|e>>6&63),b+=String.fromCharCode(128|e>>0&63)):(b+=String.fromCharCode(192|e>>6&31),b+=String.fromCharCode(128|e>>0&63));return b}function n(a){var b,c,d,e,f,g;for(b="",d=a.length,c=0;d>c;)switch(e=a.charCodeAt(c++),e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&e)<<6|63&f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&e)<<12|(63&f)<<6|(63&g)<<0)}return b}function o(a){var b,c,d,e,f,g;for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=z.charAt(e>>2),b+=z.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=z.charAt(e>>2),b+=z.charAt((3&e)<<4|(240&f)>>4),b+=z.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=z.charAt(e>>2),b+=z.charAt((3&e)<<4|(240&f)>>4),b+=z.charAt((15&f)<<2|(192&g)>>6),b+=z.charAt(63&g)}return b}function p(a){var b,c,d,e,f,g,h;for(g=a.length,f=0,h="";g>f;){do b=A[255&a.charCodeAt(f++)];while(g>f&&-1==b);if(-1==b)break;do c=A[255&a.charCodeAt(f++)];while(g>f&&-1==c);if(-1==c)break;h+=String.fromCharCode(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(f++),61==d)return h;d=A[d]}while(g>f&&-1==d);if(-1==d)break;h+=String.fromCharCode((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(f++),61==e)return h;e=A[e]}while(g>f&&-1==e);if(-1==e)break;h+=String.fromCharCode((3&d)<<6|e)}return h}function q(){var b="";try{var c=a.parseJSON(B.decode(unescape(x("ppinf")).split("|")[3]));b=c.uid.replace(/^u/g,"")}catch(d){console&&console.error&&console.error(d.message)}return b}function r(){var a="";try{a=x("__utma").split(".")[1]+x("__utma").split(".")[2]}catch(b){console&&console.error&&console.error(b.message)}return a}function s(b){var c=[];if(b)for(var d in b)b.hasOwnProperty(d)&&c.push(d+"="+b[d]);c.push("hiveid="+r()),c.push("userid="+q()),c.push("clsct="+(new Date).getTime()),c=c.join("&");var e=document.createElement("img");e.src="http://analysis.tuanimg.com/click_v0.gif?"+c,e.onload=function(){a(this).remove()},document.body.appendChild(e)}function t(a,b){var d,e,f=a||{};for(var g in b)if(b.hasOwnProperty(g)){if(d=f[g],e=b[g],d===e)continue;e!==c&&(f[g]=e)}return f}var b=b,u=document,v=(u.documentMode,"http://im.zhe800.com/"),w=v+"index.html",x=function(a,d,e){if(0==arguments.length){try{if(0==navigator.cookieEnabled)return!1}catch(f){b.console&&console.info(f)}return!0}if(arguments.length>1&&"[object Object]"!==String(d)){if((null===d||d===c)&&(e.expires=-1),"number"==typeof e.expires){var g=e.expires,h=e.expires=new Date;h.setDate(h.getDate()+g)}return d=String(d),document.cookie=[encodeURIComponent(a),"=",e.raw?d:encodeURIComponent(d),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")}e=d||{};var i,j=e.raw?function(a){return a}:decodeURIComponent;return(i=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?j(i[1]):""},y=function(){var a,g=k(),j=(g.btn,g.text),l=g.statetxt,m=g.clickkey||"";b.onload=function(){var k,n=u.body.appendChild(d(g));switch(g.othersidename&&e(decodeURIComponent(g.othersidename+"@"+(g.host||"im.zhe800.com")),function(a){var b=a[0]&&a[0].status;if(b!=c){var d="";switch(b){case 0:d=" offline";break;case 2:d=" busy"}g&&1==g.iconStyle&&(d+=" newstyle"),n.className+=d,i(n,b,l,j)}}),g.busUid&&"buyer"===g.type&&f(2,g.busUid,function(a){if(a!=c){var b="";switch(a){case 0:b=" offline";break;case 2:b=" busy"}g&&1==g.iconStyle&&(b+=" newstyle"),n.className+=b,i(n,a,l,j)}}),g.type){case"buyer":k="ppinf"}h(n,"click",function(d){var e=b.event||d;if(e.preventDefault?e.preventDefault():e.returnValue=!1,!x(k))return"postMessage"in b?parent.postMessage("loginpop","*"):navigator.wather="loginpop",!1;{var f=1050,g=615;(b.screen.availWidth-f)/2,(b.screen.availHeight-g-30)/2}a=b.open(n.href,"IMwindowBuyer",""),a!==c&&a.focus(),m&&s({clickkey:m})})}};y();var z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),B={encode:function(a){return o(m(a))},decode:function(a){return n(p(a))}}}(window.jQuery,window);